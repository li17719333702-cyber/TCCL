# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ”§ é—®é¢˜ä¿®å¤è¯´æ˜

ä¹‹å‰çš„ç‰ˆæœ¬å­˜åœ¨ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š**åˆ†æè„šæœ¬ä½¿ç”¨çš„æ˜¯éšæœºåˆå§‹åŒ–çš„æ¨¡å‹ï¼Œè€Œä¸æ˜¯è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡**ã€‚

ç°åœ¨å·²ä¿®å¤ï¼š
- âœ… `single_tccl.py` ç°åœ¨ä¼šè‡ªåŠ¨ä¿å­˜è®­ç»ƒå¥½çš„æ¨¡å‹åˆ° `./saved_models/` ç›®å½•
- âœ… `analysis_why_tccl_works.py` å’Œ `analysis_advanced.py` ç°åœ¨ä¼šåŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡
- âœ… å¦‚æœæ¨¡å‹ä¸å­˜åœ¨ï¼Œä¼šç»™å‡ºæ¸…æ™°çš„æç¤ºä¿¡æ¯

---

## ğŸ“ æ­£ç¡®çš„ä½¿ç”¨æµç¨‹

### æ­¥éª¤1: è®­ç»ƒæ¨¡å‹ï¼ˆå¿…éœ€ï¼‰

åœ¨è¿›è¡Œä»»ä½•åˆ†æä¹‹å‰ï¼Œ**å¿…é¡»å…ˆè®­ç»ƒæ¨¡å‹**ï¼š

```bash
# è®­ç»ƒCWRUæ•°æ®é›†çš„æ¨¡å‹
python single_tccl.py --cwru_path "E:/AI/CWRU-dataset-main/48k007"

# æˆ–è€…è®­ç»ƒæ‰€æœ‰ä¸‰ä¸ªæ•°æ®é›†
python single_tccl.py \
    --cwru_path "E:/AI/CWRU-dataset-main/48k007" \
    --seu_path "E:/AI/Mechanical-datasets-master/dataset" \
    --mfpt_path "E:/AI/MFPT-Fault-Data-Sets-20200227T131140Z-001/MFPT/MFPT"
```

è®­ç»ƒå®Œæˆåï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨ä¿å­˜åˆ°ï¼š
- `./saved_models/tccl_cwru_best.pth`
- `./saved_models/tccl_seu_best.pth`
- `./saved_models/tccl_mfpt_best.pth`

### æ­¥éª¤2: è¿è¡Œåˆ†æï¼ˆéœ€è¦è®­ç»ƒå¥½çš„æ¨¡å‹ï¼‰

è®­ç»ƒå®Œæˆåï¼Œæ‰èƒ½è¿è¡Œåˆ†æè„šæœ¬ï¼š

```bash
# åŸºç¡€åˆ†æ
python analysis_why_tccl_works.py --dataset cwru

# é«˜çº§åˆ†æ
python analysis_advanced.py --dataset cwru

# ä¸€é”®è¿è¡Œæ‰€æœ‰åˆ†æ
python run_all_analysis.py --dataset cwru
```

---

## âš ï¸ å¸¸è§é”™è¯¯

### é”™è¯¯1: æœªè®­ç»ƒæ¨¡å‹å°±è¿è¡Œåˆ†æ

**ç—‡çŠ¶**ï¼š
```
âš  è­¦å‘Š: æœªæ‰¾åˆ°è®­ç»ƒå¥½çš„æ¨¡å‹ (./saved_models/tccl_cwru_best.pth)
âš  è¯·å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤è®­ç»ƒæ¨¡å‹ï¼š
   python single_tccl.py --dataset cwru
âš  å½“å‰å°†ä½¿ç”¨éšæœºåˆå§‹åŒ–çš„æ¨¡å‹ï¼Œç»“æœå¯èƒ½ä¸ç†æƒ³ï¼
```

**ç»“æœ**ï¼š
- Silhouette Coefficient å¾ˆä½ï¼ˆ~0.63ï¼‰
- Template Contrast Ratio < 1.0ï¼ˆåº”è¯¥ > 2.5ï¼‰
- èšç±»å‡†ç¡®ç‡ä¸ç†æƒ³

**è§£å†³æ–¹æ³•**ï¼š
å…ˆè¿è¡Œ `single_tccl.py` è®­ç»ƒæ¨¡å‹ï¼Œç„¶åå†è¿è¡Œåˆ†æè„šæœ¬ã€‚

---

## ğŸ“Š é¢„æœŸç»“æœå¯¹æ¯”

### ä½¿ç”¨éšæœºåˆå§‹åŒ–æ¨¡å‹ï¼ˆé”™è¯¯âŒï¼‰

```
Silhouette Coefficient: 0.6343
Clustering Accuracy: 0.9636 (96.36%)
Template Contrast Ratio: 0.8859x  â† è¿™ä¸ªå¾ˆä½ï¼
```

### ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆæ­£ç¡®âœ…ï¼‰

```
Silhouette Coefficient: 0.78+
Clustering Accuracy: 98%+
Template Contrast Ratio: 2.5+x  â† è‡ªåŒ¹é…è¿œå¼ºäºäº¤å‰åŒ¹é…
Separation Ratio: 4.0+
```

---

## ğŸ¯ å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹

```bash
# 1. è®­ç»ƒCWRUæ•°æ®é›†ï¼ˆçº¦5-10åˆ†é’Ÿï¼Œå–å†³äºGPUï¼‰
python single_tccl.py \
    --cwru_path "E:/AI/CWRU-dataset-main/48k007" \
    --epochs 50 \
    --seed 42

# è¾“å‡ºç¤ºä¾‹:
# âœ“ è®­ç»ƒå®Œæˆï¼æœ€ç»ˆæŸå¤±: 0.1234
# ğŸ’¾ ä¿å­˜æ¨¡å‹...
# âœ“ æ¨¡å‹å·²ä¿å­˜è‡³: ./saved_models/tccl_cwru_best.pth
# ğŸ“Š èšç±»æ€§èƒ½ç»“æœ
#   Accuracy:  0.9814
#   ARI:       0.7683
#   NMI:       0.8302
#   Silhouette: 0.7845

# 2. è¿è¡ŒåŸºç¡€åˆ†æï¼ˆä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹ï¼‰
python analysis_why_tccl_works.py --dataset cwru

# è¾“å‡ºç¤ºä¾‹:
# ğŸ“‚ åŠ è½½æ¨¡å‹: ./saved_models/tccl_cwru_best.pth
# âœ“ æˆåŠŸåŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹!
#   - Trained epochs: 50
#   - Final loss: 0.1234
#   - Feature dim: 16
# 
# ======================================================================
# ANALYSIS 1: Feature Space Structure
# ======================================================================
# Computing UMAP projection...
# âœ“ Saved: ./analysis_results\cwru\fig1_feature_space_projection.pdf/png

# 3. è¿è¡Œé«˜çº§åˆ†æ
python analysis_advanced.py --dataset cwru

# 4. æŸ¥çœ‹ç”Ÿæˆçš„è®ºæ–‡å›¾è¡¨
# æ‰€æœ‰å›¾è¡¨ä¿å­˜åœ¨: ./analysis_results/cwru/
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

è®­ç»ƒå’Œåˆ†æåçš„ç›®å½•ç»“æ„ï¼š

```
TCCL/
â”œâ”€â”€ single_tccl.py              # è®­ç»ƒè„šæœ¬ï¼ˆä¼šä¿å­˜æ¨¡å‹ï¼‰
â”œâ”€â”€ analysis_why_tccl_works.py  # åŸºç¡€åˆ†æï¼ˆä¼šåŠ è½½æ¨¡å‹ï¼‰
â”œâ”€â”€ analysis_advanced.py         # é«˜çº§åˆ†æï¼ˆä¼šåŠ è½½æ¨¡å‹ï¼‰
â”œâ”€â”€ run_all_analysis.py          # ä¸€é”®è¿è¡Œ
â”œâ”€â”€ saved_models/                # è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ tccl_cwru_best.pth      # CWRUæ¨¡å‹æƒé‡
â”‚   â”œâ”€â”€ tccl_seu_best.pth       # SEUæ¨¡å‹æƒé‡
â”‚   â””â”€â”€ tccl_mfpt_best.pth      # MFPTæ¨¡å‹æƒé‡
â””â”€â”€ analysis_results/            # åˆ†æç»“æœ
    â”œâ”€â”€ cwru/
    â”‚   â”œâ”€â”€ fig1_feature_space_projection.pdf
    â”‚   â”œâ”€â”€ fig2_cluster_quality_analysis.pdf
    â”‚   â”œâ”€â”€ fig3_confusion_matrix.pdf
    â”‚   â””â”€â”€ ... (æ›´å¤šå›¾è¡¨)
    â”œâ”€â”€ seu/
    â””â”€â”€ mfpt/
```

---

## ğŸ” éªŒè¯æ¨¡å‹æ˜¯å¦æ­£ç¡®åŠ è½½

è¿è¡Œåˆ†æè„šæœ¬æ—¶ï¼Œæ£€æŸ¥è¾“å‡ºï¼š

### âœ… æ­£ç¡®ï¼ˆåŠ è½½äº†è®­ç»ƒå¥½çš„æ¨¡å‹ï¼‰

```
ğŸ“‚ åŠ è½½æ¨¡å‹: ./saved_models/tccl_cwru_best.pth
âœ“ æˆåŠŸåŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹!
  - Trained epochs: 50
  - Final loss: 0.1234
  - Feature dim: 16
```

### âŒ é”™è¯¯ï¼ˆä½¿ç”¨éšæœºåˆå§‹åŒ–ï¼‰

```
âš  è­¦å‘Š: æœªæ‰¾åˆ°è®­ç»ƒå¥½çš„æ¨¡å‹ (./saved_models/tccl_cwru_best.pth)
âš  è¯·å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤è®­ç»ƒæ¨¡å‹ï¼š
   python single_tccl.py --dataset cwru
âš  å½“å‰å°†ä½¿ç”¨éšæœºåˆå§‹åŒ–çš„æ¨¡å‹ï¼Œç»“æœå¯èƒ½ä¸ç†æƒ³ï¼
```

---

## ğŸ’¡ æç¤º

1. **è®­ç»ƒæ—¶é—´**ï¼šæ¯ä¸ªæ•°æ®é›†çº¦5-10åˆ†é’Ÿï¼ˆä½¿ç”¨GPUï¼‰
2. **æ¨¡å‹å¤§å°**ï¼šæ¯ä¸ª `.pth` æ–‡ä»¶çº¦ 1-2 MB
3. **é‡æ–°è®­ç»ƒ**ï¼šå¦‚æœè¦é‡æ–°è®­ç»ƒï¼Œç›´æ¥å†æ¬¡è¿è¡Œ `single_tccl.py`ï¼Œä¼šè¦†ç›–æ—§æ¨¡å‹
4. **ä¸åŒå‚æ•°**ï¼šå¦‚æœä¿®æ”¹äº† `feature_dim` ç­‰å‚æ•°ï¼Œéœ€è¦é‡æ–°è®­ç»ƒæ¨¡å‹

---

## ğŸ†˜ æ•…éšœæ’é™¤

### Q1: æç¤º"æœªæ‰¾åˆ°è®­ç»ƒå¥½çš„æ¨¡å‹"

**A**: è¿è¡Œ `python single_tccl.py` å…ˆè®­ç»ƒæ¨¡å‹

### Q2: åˆ†æç»“æœå¾ˆå·®ï¼ˆTemplate Contrast Ratio < 1.0ï¼‰

**A**: ç¡®è®¤æ¨¡å‹å·²æ­£ç¡®åŠ è½½ï¼ˆçœ‹è¾“å‡ºä¸­æ˜¯å¦æœ‰"âœ“ æˆåŠŸåŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹!"ï¼‰

### Q3: æƒ³ä½¿ç”¨ä¸åŒçš„éšæœºç§å­

**A**: è®­ç»ƒæ—¶æŒ‡å®šï¼š`python single_tccl.py --seed 123`

### Q4: æ¨¡å‹æ–‡ä»¶æŸå

**A**: åˆ é™¤ `./saved_models/tccl_xxx_best.pth` å¹¶é‡æ–°è®­ç»ƒ

---

## âœ¨ æ€»ç»“

**å…³é”®ç‚¹**ï¼šåˆ†æè„šæœ¬ä¾èµ–äºè®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡ï¼

**æ­£ç¡®æµç¨‹**ï¼š
1. è®­ç»ƒ â†’ 2. åˆ†æ â†’ 3. æŸ¥çœ‹ç»“æœ

**é”™è¯¯æµç¨‹**ï¼š
~~ç›´æ¥è¿è¡Œåˆ†æï¼ˆä¼šä½¿ç”¨éšæœºæƒé‡ï¼Œç»“æœä¸å¯é ï¼‰~~

---

æœ€åæ›´æ–°: 2024-11-17
